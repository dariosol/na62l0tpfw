#
# DE4 development board: DEVICE EP4SGX230KF40C2  
#
set_global_assignment -name FAMILY "Stratix IV"
set_global_assignment -name DEVICE EP4SGX230KF40C2
set_global_assignment -name DEVICE_FILTER_PACKAGE ANY
set_global_assignment -name DEVICE_FILTER_PIN_COUNT ANY

#
# IOBANK_VCCIO  
#
set_global_assignment -name STRATIX_DEVICE_IO_STANDARD "2.5 V"

set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 1A
set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 1C

set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 2A
set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 2C

set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 3A
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 3B
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 3C

set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 4A
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 4B
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 4C

set_global_assignment -name IOBANK_VCCIO 3.0V -section_id 5A
set_global_assignment -name IOBANK_VCCIO 3.0V -section_id 5C
#NOTE: StratixIV I/O standards --> "The 3.3-V I/O standard 
#      is supported using bank supply voltage (VCCIO) at 3.0V".

set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 6A
set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 6C

set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 7A
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 7B
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 7C

set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 8A
set_global_assignment -name IOBANK_VCCIO 1.8V -section_id 8B
set_global_assignment -name IOBANK_VCCIO 2.5V -section_id 8C

#
# Free running clocks
#
set_location_assignment PIN_AC35 -to OSC_50_B2
set_location_assignment PIN_AV22 -to OSC_50_B3
set_location_assignment PIN_AV19 -to OSC_50_B4
set_location_assignment PIN_AC6  -to OSC_50_B5
set_location_assignment PIN_AB6  -to OSC_50_B6
set_location_assignment PIN_A19  -to OSC_50_B7
set_instance_assignment -name IO_STANDARD "2.5 V" -to OSC_50_B2
set_instance_assignment -name IO_STANDARD "1.8 V" -to OSC_50_B3
set_instance_assignment -name IO_STANDARD "1.8 V" -to OSC_50_B4
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to OSC_50_B5
set_instance_assignment -name IO_STANDARD "2.5 V" -to OSC_50_B6
set_instance_assignment -name IO_STANDARD "1.8 V" -to OSC_50_B7

set_location_assignment PIN_A21 -to GCLKIN
set_instance_assignment -name IO_STANDARD "1.8 V" -to GCLKIN
#Note: Clock source select SW7

set_location_assignment PIN_AH19 -to GCLKOUT_FPGA
set_instance_assignment -name IO_STANDARD "1.8 V" -to GCLKOUT_FPGA
#Note: single ended output

set_location_assignment PIN_B22 -to PLL_CLKIN_p
set_location_assignment PIN_A22 -to PLL_CLKIN_n
set_instance_assignment -name IO_STANDARD LVDS -to PLL_CLKIN_p
#Note: Bank 8C --> external rterm 100ohm

set_location_assignment PIN_B23 -to SMA_CLKIN_p
set_location_assignment PIN_A23 -to SMA_CLKIN_n
set_instance_assignment -name IO_STANDARD LVDS -to SMA_CLKIN_p
#Note: Bank 8C --> external rterm 100ohm + SMA 50ohm single ended x 2

#
# GX REFCLK
#
# Note: all GX_TRANSCEIVER REFCLK inputs are configured as LVDS I/O standard;
#       all unused REFCLK inputs are connected to GND 
#
#
set_location_assignment PIN_AN38 -to PCIE_REFCLK_p
set_location_assignment PIN_AN39 -to PCIE_REFCLK_n
set_instance_assignment -name IO_STANDARD LVDS -to PCIE_REFCLK_p
set_location_assignment PIN_AL38 -to REFCLK_L1_NOT_USED_p
set_location_assignment PIN_AL39 -to REFCLK_L1_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_L1_NOT_USED_p
#Note: Bank QL0 --> REFCLK_L1 not used (gnd)

set_location_assignment PIN_AA38 -to REFCLK_L2_NOT_USED_p
set_location_assignment PIN_AA39 -to REFCLK_L2_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_L2_NOT_USED_p
set_location_assignment PIN_W38  -to REFCLK_L3_NOT_USED_p
set_location_assignment PIN_W39  -to REFCLK_L3_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_L3_NOT_USED_p
#Note: Bank QL1 --> REFCLK_L2/_L3 not used (gnd)

set_location_assignment PIN_J38  -to HSMA_REFCLK_p
set_location_assignment PIN_J39  -to HSMA_REFCLK_n
set_instance_assignment -name IO_STANDARD LVDS -to HSMA_REFCLK_p
set_location_assignment PIN_G38  -to REFCLK_L5_NOT_USED_p
set_location_assignment PIN_G39  -to REFCLK_L5_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_L5_NOT_USED_p
#Note: Bank QL2 --> REFCLK_L5 not used (gnd)

set_location_assignment PIN_AN2  -to SATA_REFCLK_p
set_location_assignment PIN_AN1  -to SATA_REFCLK_n
set_instance_assignment -name IO_STANDARD LVDS -to SATA_REFCLK_p
set_location_assignment PIN_AL2  -to REFCLK_R1_NOT_USED_p
set_location_assignment PIN_AL1  -to REFCLK_R1_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_R1_NOT_USED_p
#Note: Bank QR0 --> REFCLK_R1 not used (gnd)

set_location_assignment PIN_AA2  -to HSMB_REFCLK_p
set_location_assignment PIN_AA1  -to HSMB_REFCLK_n
set_instance_assignment -name IO_STANDARD LVDS -to HSMB_REFCLK_p
set_location_assignment PIN_W2   -to SMA_GXBCLK_p
set_location_assignment PIN_W1   -to SMA_GXBCLK_n
set_instance_assignment -name IO_STANDARD LVDS -to SMA_GXBCLK_p
#Note: Bank QR1 --> all REFCLK connected

set_location_assignment PIN_J2   -to REFCLK_R4_NOT_USED_p
set_location_assignment PIN_J1   -to REFCLK_R4_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_R4_NOT_USED_p
set_location_assignment PIN_G2   -to REFCLK_R5_NOT_USED_p
set_location_assignment PIN_G1   -to REFCLK_R5_NOT_USED_n
set_instance_assignment -name IO_STANDARD LVDS -to REFCLK_R5_NOT_USED_p
#Note: Bank QR2 --> REFCLK_R4/_R5 not used (gnd)

#
# CPU_RESET button
#
set_location_assignment PIN_V34 -to CPU_RESET_n

#
# ENET interface
#
set_location_assignment PIN_T30  -to ETH_TX_p[0]
set_location_assignment PIN_T31  -to ETH_TX_n[0]
set_location_assignment PIN_U31  -to ETH_RX_p[0]
set_location_assignment PIN_V31  -to ETH_RX_n[0]
set_location_assignment PIN_R30  -to ETH_MDC[0]
set_location_assignment PIN_W32  -to ETH_MDIO[0]
set_location_assignment PIN_B20  -to ETH_INT_n[0]
#set_location_assignment PIN_V29  -to ETH_RST_n[0]

set_location_assignment PIN_R32  -to ETH_TX_p[1]
set_location_assignment PIN_R33  -to ETH_TX_n[1]
set_location_assignment PIN_N33  -to ETH_RX_p[1]
set_location_assignment PIN_N34  -to ETH_RX_n[1]
set_location_assignment PIN_J6   -to ETH_MDC[1]
set_location_assignment PIN_J5   -to ETH_MDIO[1]
set_location_assignment PIN_AG30 -to ETH_INT_n[1]
#set_location_assignment PIN_V29  -to ETH_RST_n[1]

set_location_assignment PIN_M32  -to ETH_TX_p[2]
set_location_assignment PIN_L32  -to ETH_TX_n[2]
set_location_assignment PIN_K34  -to ETH_RX_p[2]
set_location_assignment PIN_K35  -to ETH_RX_n[2]
set_location_assignment PIN_K6   -to ETH_MDC[2]
set_location_assignment PIN_K5   -to ETH_MDIO[2]
set_location_assignment PIN_AE30 -to ETH_INT_n[2]
#set_location_assignment PIN_V29  -to ETH_RST_n[2]

set_location_assignment PIN_P31  -to ETH_TX_p[3]
set_location_assignment PIN_P32  -to ETH_TX_n[3]
set_location_assignment PIN_J34  -to ETH_RX_p[3]
set_location_assignment PIN_J35  -to ETH_RX_n[3]
set_location_assignment PIN_N7   -to ETH_MDC[3]
set_location_assignment PIN_N8   -to ETH_MDIO[3]
set_location_assignment PIN_AE31 -to ETH_INT_n[3]
#set_location_assignment PIN_V29  -to ETH_RST_n[3]

# eth common reset
set_location_assignment PIN_V29  -to ETH_RST_n

# eth sgmii I/O (LVDS)
set_instance_assignment -name IO_STANDARD LVDS -to ETH_RX_p[0]
set_instance_assignment -name IO_STANDARD LVDS -to ETH_RX_p[1]
set_instance_assignment -name IO_STANDARD LVDS -to ETH_RX_p[2]
set_instance_assignment -name IO_STANDARD LVDS -to ETH_RX_p[3]
set_instance_assignment -name INPUT_TERMINATION DIFFERENTIAL -to ETH_RX_p[0]
set_instance_assignment -name INPUT_TERMINATION DIFFERENTIAL -to ETH_RX_p[1]
set_instance_assignment -name INPUT_TERMINATION DIFFERENTIAL -to ETH_RX_p[2]
set_instance_assignment -name INPUT_TERMINATION DIFFERENTIAL -to ETH_RX_p[3]

set_instance_assignment -name IO_STANDARD LVDS -to ETH_TX_p[0]
set_instance_assignment -name IO_STANDARD LVDS -to ETH_TX_p[1]
set_instance_assignment -name IO_STANDARD LVDS -to ETH_TX_p[2]
set_instance_assignment -name IO_STANDARD LVDS -to ETH_TX_p[3]

#
# USER DIP SWITCH (SW6, BANK 5C, LVCMOS/TTL 3.3V supported using VCCIO = 3.0V)
#
# Note: dip switch pullups connected to 3.0V --> SW-ON = GND, SW-OFF = VCC
#
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[0]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[1]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[2]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[3]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[4]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[5]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[6]
set_instance_assignment -name IO_STANDARD "3.3-V LVCMOS" -to SW[7]
set_location_assignment PIN_AB13 -to SW[0]
set_location_assignment PIN_AB12 -to SW[1]
set_location_assignment PIN_AB11 -to SW[2]
set_location_assignment PIN_AB10 -to SW[3]
set_location_assignment PIN_AB9  -to SW[4]
set_location_assignment PIN_AC8  -to SW[5]
set_location_assignment PIN_AH6  -to SW[6]
set_location_assignment PIN_AG6  -to SW[7]

#
# HSMC_NET (dual gigabit ethernet board, RGMII mode, J20 HSMC Port A) 
#
#

#
# ENET 0
#
set_location_assignment PIN_AP33 -to ENET_RST_n[0]

set_location_assignment PIN_AL32 -to ENET_TX_EN[0]
set_location_assignment PIN_AK32 -to ENET_TX_ER[0]
set_location_assignment PIN_AH28 -to ENET_GTX_CLK[0]
set_location_assignment PIN_AD30 -to ENET_TX_D[0][7]
set_location_assignment PIN_AK31 -to ENET_TX_D[0][6]
set_location_assignment PIN_AK29 -to ENET_TX_D[0][5]
set_location_assignment PIN_AH27 -to ENET_TX_D[0][4]
set_location_assignment PIN_AR35 -to ENET_TX_D[0][3]
set_location_assignment PIN_AP35 -to ENET_TX_D[0][2]
set_location_assignment PIN_AU31 -to ENET_TX_D[0][1]
set_location_assignment PIN_AG27 -to ENET_TX_D[0][0]

set_location_assignment PIN_AJ29 -to ENET_RX_DV[0]
set_location_assignment PIN_AD31 -to ENET_RX_ER[0]
set_location_assignment PIN_AU32 -to ENET_RX_CLK[0]
set_location_assignment PIN_AR31 -to ENET_RX_D[0][7]
set_location_assignment PIN_AU33 -to ENET_RX_D[0][6]
set_location_assignment PIN_AU34 -to ENET_RX_D[0][5]
set_location_assignment PIN_AT30 -to ENET_RX_D[0][4]
set_location_assignment PIN_AV34 -to ENET_RX_D[0][3]
set_location_assignment PIN_AC28 -to ENET_RX_D[0][2]
set_location_assignment PIN_AT32 -to ENET_RX_D[0][1]
set_location_assignment PIN_AC29 -to ENET_RX_D[0][0]

set_location_assignment PIN_AJ31 -to ENET_MDC[0]
set_location_assignment PIN_AL31 -to ENET_MDIO[0]

#
# ENET 1
#
set_location_assignment PIN_AM31 -to ENET_RST_n[1]

set_location_assignment PIN_AF26 -to ENET_TX_EN[1]
set_location_assignment PIN_AE26 -to ENET_TX_ER[1]
set_location_assignment PIN_AG28 -to ENET_GTX_CLK[1]
set_location_assignment PIN_AM35 -to ENET_TX_D[1][7]
set_location_assignment PIN_AM34 -to ENET_TX_D[1][6]
set_location_assignment PIN_AE29 -to ENET_TX_D[1][5]
set_location_assignment PIN_AG32 -to ENET_TX_D[1][4]
set_location_assignment PIN_AP34 -to ENET_TX_D[1][3]
set_location_assignment PIN_AN33 -to ENET_TX_D[1][2]
set_location_assignment PIN_AE28 -to ENET_TX_D[1][1]
set_location_assignment PIN_AG31 -to ENET_TX_D[1][0]

set_location_assignment PIN_AK34 -to ENET_RX_DV[1]
set_location_assignment PIN_AP30 -to ENET_RX_ER[1]
set_location_assignment PIN_AK35 -to ENET_RX_CLK[1]
set_location_assignment PIN_AB28 -to ENET_RX_D[1][7]
set_location_assignment PIN_AD27 -to ENET_RX_D[1][6]
set_location_assignment PIN_AB31 -to ENET_RX_D[1][5]
set_location_assignment PIN_AJ35 -to ENET_RX_D[1][4]
set_location_assignment PIN_AE27 -to ENET_RX_D[1][3]
set_location_assignment PIN_AH35 -to ENET_RX_D[1][2]
set_location_assignment PIN_AB30 -to ENET_RX_D[1][1]
set_location_assignment PIN_AJ34 -to ENET_RX_D[1][0]

set_location_assignment PIN_AN31 -to ENET_MDC[1]
set_location_assignment PIN_AG29 -to ENET_MDIO[1]

#
# HSMC_NET (dual gigabit ethernet board, RGMII mode, J21 HSMC Port B) 
#
#

#
# ENET 2
#
set_location_assignment PIN_U5 -to ENET_RST_n[2]

set_location_assignment PIN_P8 -to ENET_TX_EN[2]
set_location_assignment PIN_N9 -to ENET_TX_ER[2]
set_location_assignment PIN_J8 -to ENET_GTX_CLK[2]
set_location_assignment PIN_M11 -to ENET_TX_D[2][7]
set_location_assignment PIN_U10 -to ENET_TX_D[2][6]
set_location_assignment PIN_M7 -to ENET_TX_D[2][5]
set_location_assignment PIN_R8 -to ENET_TX_D[2][4]
set_location_assignment PIN_P6 -to ENET_TX_D[2][3]
set_location_assignment PIN_R7 -to ENET_TX_D[2][2]
set_location_assignment PIN_R5 -to ENET_TX_D[2][1]
set_location_assignment PIN_R9 -to ENET_TX_D[2][0]

set_location_assignment PIN_M8 -to ENET_RX_DV[2]
set_location_assignment PIN_L11 -to ENET_RX_ER[2]
set_location_assignment PIN_L5 -to ENET_RX_CLK[2]
set_location_assignment PIN_G8 -to ENET_RX_D[2][7]
set_location_assignment PIN_F9 -to ENET_RX_D[2][6]
set_location_assignment PIN_N6 -to ENET_RX_D[2][5]
set_location_assignment PIN_F8 -to ENET_RX_D[2][4]
set_location_assignment PIN_N5 -to ENET_RX_D[2][3]
set_location_assignment PIN_M10 -to ENET_RX_D[2][2]
set_location_assignment PIN_M6 -to ENET_RX_D[2][1]
set_location_assignment PIN_L10 -to ENET_RX_D[2][0]

set_location_assignment PIN_V10 -to ENET_MDC[2]
set_location_assignment PIN_T9 -to ENET_MDIO[2]

#
# ENET 3
#
set_location_assignment PIN_G5 -to ENET_RST_n[3]

set_location_assignment PIN_T12 -to ENET_TX_EN[3]
set_location_assignment PIN_T13 -to ENET_TX_ER[3]
set_location_assignment PIN_K8 -to ENET_GTX_CLK[3]
set_location_assignment PIN_E10 -to ENET_TX_D[3][7]
set_location_assignment PIN_F10 -to ENET_TX_D[3][6]
set_location_assignment PIN_R11 -to ENET_TX_D[3][5]
set_location_assignment PIN_P13 -to ENET_TX_D[3][4]
set_location_assignment PIN_F6 -to ENET_TX_D[3][3]
set_location_assignment PIN_G6 -to ENET_TX_D[3][2]
set_location_assignment PIN_R12 -to ENET_TX_D[3][1]
set_location_assignment PIN_R13 -to ENET_TX_D[3][0]

set_location_assignment PIN_D8 -to ENET_RX_DV[3]
set_location_assignment PIN_C7 -to ENET_RX_ER[3]
set_location_assignment PIN_C8 -to ENET_RX_CLK[3]
set_location_assignment PIN_J9 -to ENET_RX_D[3][7]
set_location_assignment PIN_N11 -to ENET_RX_D[3][6]
set_location_assignment PIN_J10 -to ENET_RX_D[3][5]
set_location_assignment PIN_C9 -to ENET_RX_D[3][4]
set_location_assignment PIN_N10 -to ENET_RX_D[3][3]
set_location_assignment PIN_C10 -to ENET_RX_D[3][2]
set_location_assignment PIN_K10 -to ENET_RX_D[3][1]
set_location_assignment PIN_D9 -to ENET_RX_D[3][0]

set_location_assignment PIN_F5 -to ENET_MDC[3]
set_location_assignment PIN_H7 -to ENET_MDIO[3]

#
# RS232_UART (DB9-F connector J30)
#
set_location_assignment PIN_AH32 -to UART_RXD
set_location_assignment PIN_AH33 -to UART_CTS
set_location_assignment PIN_AN34 -to UART_TXD
set_location_assignment PIN_AN35 -to UART_RTS
#
# Note: the original DE4 schematic names for control signals RTS/CTS have been swapped
#       (all signals refer to DE4 side)
#  
# J30.2 UART_TXD PIN_AN34 output
# J30.3 UART_RXD PIN_AH32 input 
# J30.7 UART_CTS PIN_AH33 input
# J30.8 UART_RTS PIN_AN35 output 
#  






